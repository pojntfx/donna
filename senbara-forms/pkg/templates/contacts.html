<!DOCTYPE html>
<html lang="en">
  {{ template "header.html" . }}

  <body>
    {{ template "nav.html" . }}

    <header>
      <h2>Contacts</h2>

      <a href="/contacts/add">
        <span aria-hidden="true">🤝</span> Add a contact
      </a>
    </header>

    <ul>
      {{ range .Entries }}
      <li>
        <div>
          <h3>
            <a href="/contacts/view?id={{ .ID }}">
              {{ .FirstName }} {{ .LastName }} {{ if ne .Nickname "" }} ({{
              .Nickname }}) {{ end }}
            </a>
          </h3>

          <div>
            {{ .Email }} {{ if and (ne .Email "") (ne .Pronouns "") }} | {{ end
            }} {{ .Pronouns }}
          </div>
        </div>

        <div>
          <form
            action="/contacts/delete?id={{ .ID }}"
            method="post"
            onsubmit="return confirm('Are you sure you want to delete this contact?')"
          >
            <button type="submit">
              <span aria-hidden="true">🗑️</span> Delete
            </button>
          </form>

          <a href="/contacts/edit?id={{ .ID }}">
            <span aria-hidden="true">✏️</span> Edit
          </a>
        </div>
      </li>
      {{ else }}
      <li>No contacts yet.</li>
      {{ end }}
    </ul>

    {{ template "footer.html" . }}
  </body>
</html>
